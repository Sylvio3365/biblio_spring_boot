<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <title>RÃ©servations validÃ©es Ã  transformer en prÃªt</title>
</head>

<body>
    <h2>ðŸ“… RÃ©servations validÃ©es Ã  transformer en prÃªt</h2>
    <!-- âœ… Affichage clair de la date choisie -->
    <p><strong>Date sÃ©lectionnÃ©e :</strong> <span th:text="${datepret}">2025-07-14</span></p>
    <!-- ðŸ”Ž Formulaire de sÃ©lection de date -->
    <form th:action="@{/reservation/en_pret}" method="get">
        <label for="datepret">Choisir la date de prÃªt :</label>
        <input type="date" id="datepret" name="datepret" th:value="${datepret}" required>
        <button type="submit">Afficher</button>
    </form>

    <br>

    <!-- ðŸ“ Tableau des rÃ©servations validÃ©es -->
    <table border="1" cellpadding="10" cellspacing="0">
        <thead>
            <tr>
                <th>NÂ°</th>
                <th>AdhÃ©rent</th>
                <th>Exemplaire</th>
                <th>Livre</th>
                <th>Date prÃ©vue</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody>
            <tr th:each="reservation, stat : ${reservations}">
                <td th:text="${stat.index + 1}">1</td>
                <td th:text="${reservation.adherent.nom + ' ' + reservation.adherent.prenom}">Nom PrÃ©nom</td>
                <td th:text="${reservation.exemplaire.numero}">EX123</td>
                <td th:text="${reservation.exemplaire.livre.titre}">Titre du livre</td>
                <td th:text="${reservation.datepret}">2025-07-14</td>
                <td>
                    <form th:action="@{/reservation/transformer}" method="post">
                        <input type="hidden" name="idReservation" th:value="${reservation.idreservation}" />

                        <select name="idTypePret" required>
                            <option value="">-- Type de prÃªt --</option>
                            <option th:each="tp : ${typepret}" th:value="${tp.idtypepret}" th:text="${tp.nom}">
                            </option>
                        </select>

                        <button type="submit">ðŸ“˜ Transformer en prÃªt</button>
                    </form>

                </td>
            </tr>

            <tr th:if="${reservations.size() == 0}">
                <td colspan="6">Aucune rÃ©servation validÃ©e pour cette date.</td>
            </tr>
        </tbody>
    </table>

    <br>
    <div th:if="${error}" style="color: red;">
        <p th:text="${error}"></p>
    </div>

    <div th:if="${success}" style="color: green;">
        <p th:text="${success}"></p>
    </div>
    <a th:href="@{/goAccueil}">Retour Ã  l'accueil</a>
</body>

</html>